<launch>
  <arg name="mav_name" default="ueli"/>
  <arg name="frame_id" default="odom_b"/> 
  <arg name="odometry" default="msf_core/odometry"/>
  <!-- The following line causes gzmsg and gzerr messages to be printed to the console
      (even when Gazebo is started through roslaunch) -->
  <arg name="verbose" default="true"/>

  <group ns="$(arg mav_name)">
    <node name="mav_nonlinear_mpc" pkg="mav_nonlinear_mpc" type="nonlinear_mpc_node" respawn="true" clear_params="true" output="screen" >
      <remap from="odometry" to="$(arg odometry)"/>  			<!-- CHECK THE ODOMETRY TOPIC -->

      <!-- COPIED FROM ueli_mpc.launch file in MAV-->
      <remap from="rc" to="mavros/rc/in" />
      <remap from="command/roll_pitch_yawrate_thrust" to="mavros/setpoint_raw/roll_pitch_yawrate_thrust"/>


      <rosparam file="$(find v4rl_mav_launch)/parameters/$(arg mav_name)/nonlinear_mpc.yaml" />   					<!-- SET UP MAV_PARAMETERS FOR CONTROLLERS HERE -->
      <rosparam file="$(find v4rl_mav_launch)/parameters/$(arg mav_name)/disturbance_observer.yaml"/>
      <param name="use_rc_teleop" value="true"/>  														<!-- set to TRUE if using the real UAV -->
      <param name="verbose" value="$(arg verbose)" />
      <param name="reference_frame" value="$(arg frame_id)"/>

      <param name="capability_group" value="Core"/> 						<!-- COPIED FROM ueli_mpc.launch-->
    </node>


</launch>